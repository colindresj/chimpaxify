(function($){$.fn.chimpaxify=function(options){var form=this;var defaults=$.extend({url:form.attr("action"),timeOut:3500,delay:4E3,speed:"slow",easing:"swing",loader:true,successMessage:"Success. A confirmation email has been sent your way."},options);var jsonUrl=defaults.url.replace("/post?","/post-json?")+"&c=?";var message=$('<div id="chimpaxifyMessage"></div>');form.find("input[type=email]").attr("name","EMAIL");$(form).append(message);form.on("submit",function(e){e.preventDefault();var dataSent=
$(this).serialize();$.ajax({contentType:"application/json",dataType:"jsonp",url:jsonUrl,data:dataSent,timeout:defaults.timeOut,success:function(result){if(result.result==="success"){$(message).html(defaults.successMessage);$(message).removeClass("chimpaxifyError").addClass("chimpaxifySuccess").slideDown(defaults.speed,defaults.easing)}else{$(message).html(result.msg.replace(/\d -/,""));$(message).removeClass("chimpaxifySuccess").addClass("chimpaxifyError").slideDown(defaults.speed,defaults.easing)}message.delay(defaults.delay).slideUp(defaults.speed,
defaults.easing)},error:function(){console.log("There seems to be a problem with your Chimpaxify request. Make sure your options are correct.")},beforeSend:function(){if(defaults.loader)form.addClass("chimpaxifyLoading")},complete:function(){if(defaults.loader)form.removeClass("chimpaxifyLoading")}})})}})(jQuery);
